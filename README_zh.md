# devclean

[中文版本](README_zh.md) | [English](README.md)

> 扫描开发目录，解释哪些目录大概率可以删除，以及原因是什么。

**devclean** 是一个 **只分析、不执行** 的命令行工具，用于分析开发目录中的构建产物和生成目录，帮助你判断：

> **“这个目录我到底能不能删？”**

它不会删除任何文件，只负责给出**清晰、可解释、有置信度的分析结果**。

> ⚠️ Scan-only。devclean 永远不会删除文件。

---

## devclean 解决什么问题？

几乎每个开发者都遇到过下面的情况：

- 一个项目目录占了几十 GB
- 里面有 `target/`、`build/`、`dist/`、`node_modules/`
- 你**感觉**它们是构建产物
- 但你**不完全确定**，尤其是：
  - 很久没碰的项目
  - 别人交接给你的项目
  - 多语言 / monorepo 项目

问题并不是“怎么删除”。

问题是：

> **我能不能确定，删了不会出事？**

devclean 的目标就是**降低这种不确定性**。

---

## devclean 做什么？

devclean 会扫描一个开发目录，并输出：

- 识别到的项目生态（Rust / Node.js / Python / Java 等）
- 常见的构建产物、依赖目录、生成目录
- 每个目录**为什么**被认为是可删除的
- 一个定性的**置信度等级（高 / 中 / 低）**
- 在合适情况下，给出**可复制执行的清理命令建议**

devclean 强调的是：

> **解释优先，而不是自动化优先**

---

## devclean 不做什么？

为了避免误解，这里明确列出非目标：

- ❌ 不删除任何文件或目录
- ❌ 不修改你的文件系统
- ❌ 不自动执行清理命令
- ❌ 不是系统级清理工具

所有操作始终由**你本人显式执行**。

---

## 建议清理命令（不会执行任何删除）

devclean 的设计原则是 **只分析，不动手**。

但在置信度足够高的情况下，devclean 会提供：

> **明确、可复制、你自己来执行的清理命令**

这样你可以：
- 少查资料
- 少猜
- 但仍然完全掌控风险

---

### 建议命令是如何生成的？

当 devclean 对某个目录的判断足够明确时，会输出一个 **Suggested command**。

这些命令满足以下条件：

- 🚫 devclean **永远不会自动执行**
- ✅ 都是开发者熟悉的命令
- ✅ 优先使用对应生态的原生命令

示例输出：

```text
Directory: target/
类型: Rust 构建产物
置信度: 高

原因:
- 由 cargo 在编译过程中生成
- 可随时重新生成
- 通常被加入 .gitignore

建议命令:
  cargo clean
````

是否执行、何时执行、执行与否的后果，**完全由你决定**。

---

### 优先使用生态原生命令

只要可能，devclean 会优先推荐**生态自身提供的清理方式**，而不是简单的 `rm -rf`。

| 生态      | 优先建议                                 |
| ------- | ------------------------------------ |
| Rust    | `cargo clean`                        |
| Node.js | `rm -rf node_modules && npm install` |
| Java    | `mvn clean` / `gradle clean`         |
| Python  | 常见缓存清理方式                             |

这样做的原因是：

* 更符合开发者直觉
* 能处理更多边界情况
* 风险更可控

---

### 基于置信度的行为差异

devclean 对每个判断都会给出一个置信度等级：

* **高置信度**
  → 提供建议命令

* **中置信度**
  → 可能提供命令，并附带风险说明

* **低置信度**
  → 不提供命令
  → 明确建议你手动检查

低置信度示例：

```text
Directory: build/
类型: 未知构建输出
置信度: 低

原因:
- 目录名称符合常见构建模式
- 未检测到明确的构建工具
- 可能包含人工生成文件

建议操作:
  请在删除前手动检查目录内容
```

---

## 安装

> ⚠️ 当前处于早期阶段，接口和输出格式可能调整。

```bash
cargo install devclean
```

---

## 使用方法

扫描当前目录：

```bash
devclean scan .
```

常用参数示例：

```bash
devclean scan . --format=json
devclean scan . --confidence=high
```

---

## 设计理念

devclean 有几条非常明确的设计原则：

* **可解释性优先于自动化**
* **安全优先于便利**
* **显式操作优先于隐式行为**

一句话总结：

> devclean 负责解释
> 你负责决定
> 没有任何文件会被悄悄删除

---

## 反馈与贡献

这是一个处于验证阶段的项目，非常需要真实反馈。

我们尤其关心：

* 你曾经犹豫是否删除的目录
* 判断错误（误报 / 漏报）的情况
* 未覆盖到的语言或构建工具
* 解释信息是否足够清晰

请使用仓库中提供的 GitHub Issue 模板提交反馈。

---

## License

MIT

